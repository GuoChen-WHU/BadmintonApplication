$(function(){function a(){var a=$(".item-select");a.attr("disabled",!1),a.css("background-color","#fff"),$("#js-toItem")[0].hash="#item"}function b(){var a=$(".item-select");a.val(null),a.attr("disabled",!0),a.css("background-color","#eee"),$("#js-toItem")[0].hash="#confirm"}function c(a){$("#js-type")[0].value=a}function d(){var a="";a="player"===$("#js-type")[0].value?"php/newplayer.php":"php/newreferee.php";try{$.post(a,$(".confirm-form").serialize(),function(a,b){if("success"!==b)throw"服务器好像出错了= =";$("#modal-submit").modal("hide"),$("#modal-response .modal-body").html(a),$("#modal-response").modal()})}catch(b){$("#modal-submit .modal-body").html(b.message)}}$("a").on("click",function(a){if(""!==this.hash){var b=this.hash;a.preventDefault(),$("html, body").animate({scrollTop:$(b).offset().top},800,function(){history.pushState?history.pushState(null,null,b):location.hash=b})}}),$(document).scroll(function(){var a=$(document).scrollTop()+200,b="";$(".cover").each(function(){var c=$(this).offset().top;a>c&&(b=$(this).attr("id"))}),$(".navbar li").removeClass("active"),$('.navbar li > a[href="#'+b+'"]').parent().addClass("active")}),$("#role-player").click(function(){a(),c("player")}),$("#role-referee").click(function(){b(),c("referee")}),$(".confirm-form input").keydown(function(a){a.preventDefault()}),$(".confirm-form input").on("keydown paste",function(a){a.preventDefault()}),$(".confirm-form").submit(function(a){a.preventDefault(),$("#modal-submit").modal("show"),setTimeout(d,1e3)})});